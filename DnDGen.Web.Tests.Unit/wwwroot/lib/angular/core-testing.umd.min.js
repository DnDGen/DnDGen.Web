!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/compiler")):"function"==typeof define&&define.amd?define("@angular/core/testing",["exports","@angular/core","@angular/compiler"],t):t(((e=e||self).ng=e.ng||{},e.ng.core=e.ng.core||{},e.ng.core.testing={}),e.ng.core,e.ng.compiler)}(this,function(e,y,k){"use strict";function x(e){var t="undefined"!=typeof Zone?Zone:null;if(!t)return function(){return Promise.reject("Zone is needed for the waitForAsync() test helper but could not be found. Please make sure that your environment includes zone.js")};t=t&&t[t.__symbol__("asyncTest")];return"function"==typeof t?t(e):function(){return Promise.reject("zone-testing.js is needed for the async() test helper but could not be found. Please make sure that your environment includes zone.js/testing")}}t.prototype._tick=function(e){this.changeDetectorRef.detectChanges(),e&&this.checkNoChanges()},t.prototype.detectChanges=function(e){var t=this;void 0===e&&(e=!0),null!=this.ngZone?this.ngZone.run(function(){t._tick(e)}):this._tick(e)},t.prototype.checkNoChanges=function(){this.changeDetectorRef.checkNoChanges()},t.prototype.autoDetectChanges=function(e){if(void 0===e&&(e=!0),null==this.ngZone)throw new Error("Cannot call autoDetectChanges when ComponentFixtureNoNgZone is set");this._autoDetect=e,this.detectChanges()},t.prototype.isStable=function(){return this._isStable&&!this.ngZone.hasPendingMacrotasks},t.prototype.whenStable=function(){var t=this;return this.isStable()?Promise.resolve(!1):(null!==this._promise||(this._promise=new Promise(function(e){t._resolve=e})),this._promise)},t.prototype._getRenderer=function(){return void 0===this._renderer&&(this._renderer=this.componentRef.injector.get(y.RendererFactory2,null)),this._renderer},t.prototype.whenRenderingDone=function(){var e=this._getRenderer();return e&&e.whenRenderingDone?e.whenRenderingDone():this.whenStable()},t.prototype.destroy=function(){this._isDestroyed||(this.componentRef.destroy(),null!=this._onUnstableSubscription&&(this._onUnstableSubscription.unsubscribe(),this._onUnstableSubscription=null),null!=this._onStableSubscription&&(this._onStableSubscription.unsubscribe(),this._onStableSubscription=null),null!=this._onMicrotaskEmptySubscription&&(this._onMicrotaskEmptySubscription.unsubscribe(),this._onMicrotaskEmptySubscription=null),null!=this._onErrorSubscription&&(this._onErrorSubscription.unsubscribe(),this._onErrorSubscription=null),this._isDestroyed=!0)};var l=t;function t(e,t,r){var o=this;this.componentRef=e,this.ngZone=t,this._autoDetect=r,this._isStable=!0,this._isDestroyed=!1,this._resolve=null,this._promise=null,this._onUnstableSubscription=null,this._onStableSubscription=null,this._onMicrotaskEmptySubscription=null,this._onErrorSubscription=null,this.changeDetectorRef=e.changeDetectorRef,this.elementRef=e.location,this.debugElement=y.getDebugNode(this.elementRef.nativeElement),this.componentInstance=e.instance,this.nativeElement=this.elementRef.nativeElement,this.componentRef=e,(this.ngZone=t)&&t.runOutsideAngular(function(){o._onUnstableSubscription=t.onUnstable.subscribe({next:function(){o._isStable=!1}}),o._onMicrotaskEmptySubscription=t.onMicrotaskEmpty.subscribe({next:function(){o._autoDetect&&o.detectChanges(!0)}}),o._onStableSubscription=t.onStable.subscribe({next:function(){o._isStable=!0,null!==o._promise&&Zone.current.scheduleMicroTask("scheduleMicrotask",function(){t.hasPendingMacrotasks||null!==o._promise&&(o._resolve(!0),o._resolve=null,o._promise=null)})}}),o._onErrorSubscription=t.onError.subscribe({next:function(e){throw e}})})}var r="undefined"!=typeof Zone?Zone:null,o=r&&r[r.__symbol__("fakeAsyncTest")],n="zone-testing.js is needed for the fakeAsync() test helper but could not be found.\n        Please make sure that your environment includes zone.js/testing";function U(){if(o)return o.resetFakeAsyncZone();throw new Error(n)}var B=function(e,t){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}B(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function s(e,s,u,l){return new(u=u||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(o,n)}i((l=l.apply(e,s||[])).next())})}function u(o,n){var i,s,u,l={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,s&&(u=2&t[0]?s.return:t[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,t[1])).done)return u;switch(s=0,(t=u?[2&t[0],u.value]:t)[0]){case 0:case 1:u=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(u=0<(u=l.trys).length&&u[u.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){l.label=t[1];break}if(6===t[0]&&l.label<u[1]){l.label=u[1],u=t;break}if(u&&l.label<u[2]){l.label=u[2],l.ops.push(t);break}u[2]&&l.ops.pop(),l.trys.pop();continue}t=n.call(o,l)}catch(e){t=[6,e],s=0}finally{i=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}Object.create;function d(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&o>=e.length?void 0:e)&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s}function f(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}Object.create;function G(o){var r=[],n=new Map;function l(e){var t,r=n.get(e);return r||(t=o(e),n.set(e,r=t.then(Z))),r}return a.forEach(function(o,e){var n=[],i=(o.templateUrl&&n.push(l(o.templateUrl).then(function(e){o.template=e})),o.styleUrls),s=o.styles||(o.styles=[]),u=o.styles.length,t=(i&&i.forEach(function(t,r){s.push(""),n.push(l(t).then(function(e){s[u+r]=e,i.splice(i.indexOf(t),1),0==i.length&&(o.styleUrls=void 0)}))}),Promise.all(n).then(function(){c.delete(e)}));r.push(t)}),L(),Promise.all(r).then(function(){})}var a=new Map,c=new Set;function p(e){return c.has(e)}function L(){var e=a;return a=new Map,e}function Z(e){return"string"==typeof e?e:e.text()}var V=0,z=(W.prototype.overrideMetadata=function(e,t,r){var o={};if(t&&!function(e){var r=[],o=(Object.keys(e).forEach(function(e){e.startsWith("_")||r.push(e)}),e);for(;o=Object.getPrototypeOf(o);)Object.keys(o).forEach(function(e){var t=Object.getOwnPropertyDescriptor(o,e);!e.startsWith("_")&&t&&"get"in t&&r.push(e)});return r}(t).forEach(function(e){return o[e]=t[e]}),r.set){if(r.remove||r.add)throw new Error("Cannot set and add/remove "+y.ɵstringify(e)+" at the same time!");var n,i=o,s=r.set;for(n in s)i[n]=s[n]}if(r.remove){var u,l=o,a=r.remove,c=this._references,p=new Set;for(u in a)!function(t){var e=a[t];Array.isArray(e)?e.forEach(function(e){p.add(g(t,e,c))}):p.add(g(t,e,c))}(u);for(u in l)!function(t){var e=l[t];Array.isArray(e)?l[t]=e.filter(function(e){return!p.has(g(t,e,c))}):p.has(g(t,e,c))&&(l[t]=void 0)}(u)}if(r.add){var d,h=o,f=r.add;for(d in f){var v=f[d],m=h[d];null!=m&&Array.isArray(m)?h[d]=m.concat(v):h[d]=v}}return new e(o)},W);function W(){this._references=new Map}function g(e,t,r){return e+":"+JSON.stringify(t,function(e,t){return t="function"==typeof t?function(e,t){var r=t.get(e);r||(r=""+y.ɵstringify(e)+V++,t.set(e,r));return r}(t,r):t})}var q=new y.ɵReflectionCapabilities,r=(v.prototype.addOverride=function(e,t){var r=this.overrides.get(e)||[];r.push(t),this.overrides.set(e,r),this.resolved.delete(e)},v.prototype.setOverrides=function(e){var r=this;this.overrides.clear(),e.forEach(function(e){var e=h(e,2),t=e[0],e=e[1];r.addOverride(t,e)})},v.prototype.getAnnotation=function(e){for(var t=q.annotations(e),r=t.length-1;0<=r;r--){var o=t[r];if(o instanceof y.Directive||o instanceof y.Component||o instanceof y.Pipe||o instanceof y.NgModule)return o instanceof this.type?o:null}return null},v.prototype.resolve=function(e){var t,r,o=this,n=this.resolved.get(e)||null;return n||((n=this.getAnnotation(e))&&(t=this.overrides.get(e))&&(r=new z,t.forEach(function(e){n=r.overrideMetadata(o.type,n,e)})),this.resolved.set(e,n)),n},v);function v(){this.overrides=new Map,this.resolved=new Map}i(_,m=r),Object.defineProperty(_.prototype,"type",{get:function(){return y.Directive},enumerable:!1,configurable:!0});var m,Q=_;function _(){return null!==m&&m.apply(this,arguments)||this}i(Y,J=r),Object.defineProperty(Y.prototype,"type",{get:function(){return y.Component},enumerable:!1,configurable:!0});var J,H=Y;function Y(){return null!==J&&J.apply(this,arguments)||this}i($,K=r),Object.defineProperty($.prototype,"type",{get:function(){return y.Pipe},enumerable:!1,configurable:!0});var K,X=$;function $(){return null!==K&&K.apply(this,arguments)||this}i(re,ee=r),Object.defineProperty(re.prototype,"type",{get:function(){return y.NgModule},enumerable:!1,configurable:!0});var ee,M,te=re;function re(){return null!==ee&&ee.apply(this,arguments)||this}(r=M=M||{})[r.DECLARATION=0]="DECLARATION",r[r.OVERRIDE_TEMPLATE=1]="OVERRIDE_TEMPLATE";w.prototype.setCompilerProviders=function(e){this.compilerProviders=e,this._injector=null},w.prototype.configureTestingModule=function(e){var t;void 0!==e.declarations&&(this.queueTypeArray(e.declarations,M.DECLARATION),(t=this.declarations).push.apply(t,f([],h(e.declarations)))),void 0!==e.imports&&(this.queueTypesFromModulesArray(e.imports),(t=this.imports).push.apply(t,f([],h(e.imports)))),void 0!==e.providers&&(t=this.providers).push.apply(t,f([],h(e.providers))),void 0!==e.schemas&&(t=this.schemas).push.apply(t,f([],h(e.schemas)))},w.prototype.overrideModule=function(e,t){this.overriddenModules.add(e),this.resolvers.module.addOverride(e,t);t=this.resolvers.module.resolve(e);if(null===t)throw E(e.name,"NgModule");this.recompileNgModule(e,t),this.queueTypesFromModulesArray([e])},w.prototype.overrideComponent=function(e,t){this.resolvers.component.addOverride(e,t),this.pendingComponents.add(e)},w.prototype.overrideDirective=function(e,t){this.resolvers.directive.addOverride(e,t),this.pendingDirectives.add(e)},w.prototype.overridePipe=function(e,t){this.resolvers.pipe.addOverride(e,t),this.pendingPipes.add(e)},w.prototype.overrideProvider=function(e,t){var t=void 0!==t.useFactory?{provide:e,useFactory:t.useFactory,deps:t.deps||[],multi:t.multi}:void 0!==t.useValue?{provide:e,useValue:t.useValue,multi:t.multi}:{provide:e},r="string"!=typeof e?y.ɵgetInjectableDef(e):null,o=null===r?null:y.resolveForwardRef(r.providedIn);("root"===o?this.rootProviderOverrides:this.providerOverrides).push(t),this.providerOverridesByToken.set(e,t),null!==r&&null!==o&&"string"!=typeof o&&(void 0!==(e=this.providerOverridesByModule.get(o))?e.push(t):this.providerOverridesByModule.set(o,[t]))},w.prototype.overrideTemplateUsingTestingModule=function(e,t){var r=this,o=e[y.ɵNG_COMP_DEF],r=!!o&&!p(e)&&(!!(r=r.resolvers.component.resolve(e)).styleUrls&&0<r.styleUrls.length);this.overrideComponent(e,{set:r?{template:t,styles:[],styleUrls:[]}:{template:t}}),r&&o.styles&&0<o.styles.length&&this.existingComponentStyles.set(e,o.styles),this.componentToModuleScope.set(e,M.OVERRIDE_TEMPLATE)},w.prototype.compileComponents=function(){return s(this,void 0,void 0,function(){var t,r=this;return u(this,function(e){switch(e.label){case 0:return(this.clearComponentResolutionQueue(),this.compileTypesSync())?[4,G(function(e){return t=t||r.injector.get(k.ResourceLoader),Promise.resolve(t.get(e))})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},w.prototype.finalize=function(){this.compileTypesSync(),this.compileTestModule(),this.applyTransitiveScopes(),this.applyProviderOverrides(),this.patchComponentsWithExistingStyles(),this.componentToModuleScope.clear();var e=this.platform.injector,e=(this.testModuleRef=new y.ɵRender3NgModuleRef(this.testModuleType,e),this.testModuleRef.injector.get(y.ApplicationInitStatus).runInitializers(),this.testModuleRef.injector.get(y.LOCALE_ID,y.ɵDEFAULT_LOCALE_ID));return y.ɵsetLocaleId(e),this.testModuleRef},w.prototype._compileNgModuleSync=function(e){this.queueTypesFromModulesArray([e]),this.compileTypesSync(),this.applyProviderOverrides(),this.applyProviderOverridesToModule(e),this.applyTransitiveScopes()},w.prototype._compileNgModuleAsync=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return this.queueTypesFromModulesArray([t]),[4,this.compileComponents()];case 1:return e.sent(),this.applyProviderOverrides(),this.applyProviderOverridesToModule(t),this.applyTransitiveScopes(),[2]}})})},w.prototype._getModuleResolver=function(){return this.resolvers.module},w.prototype._getComponentFactories=function(e){var r=this;return T(e.ɵmod.declarations).reduce(function(e,t){t=t.ɵcmp;return t&&e.push(new y.ɵRender3ComponentFactory(t,r.testModuleRef)),e},[])},w.prototype.compileTypesSync=function(){var r=this,o=!1;return this.pendingComponents.forEach(function(e){o=o||p(e);var t=r.resolvers.component.resolve(e);if(null===t)throw E(e.name,"Component");r.maybeStoreNgDef(y.ɵNG_COMP_DEF,e),y.ɵcompileComponent(e,t)}),this.pendingComponents.clear(),this.pendingDirectives.forEach(function(e){var t=r.resolvers.directive.resolve(e);if(null===t)throw E(e.name,"Directive");r.maybeStoreNgDef(y.ɵNG_DIR_DEF,e),y.ɵcompileDirective(e,t)}),this.pendingDirectives.clear(),this.pendingPipes.forEach(function(e){var t=r.resolvers.pipe.resolve(e);if(null===t)throw E(e.name,"Pipe");r.maybeStoreNgDef(y.ɵNG_PIPE_DEF,e),y.ɵcompilePipe(e,t)}),this.pendingPipes.clear(),o},w.prototype.applyTransitiveScopes=function(){function r(e){var t;return n.has(e)||(t=(t=e)===M.DECLARATION||t===M.OVERRIDE_TEMPLATE?o.testModuleType:e,n.set(e,y.ɵtransitiveScopesFor(t))),n.get(e)}var e,o=this,n=(0<this.overriddenModules.size&&(e=this.testModuleType[y.ɵNG_MOD_DEF],0<(e=this.collectModulesAffectedByOverrides(e.imports)).size&&e.forEach(function(e){o.storeFieldOfDefOnType(e,y.ɵNG_MOD_DEF,"transitiveCompileScopes"),e[y.ɵNG_MOD_DEF].transitiveCompileScopes=null})),new Map);this.componentToModuleScope.forEach(function(e,t){e=r(e);o.storeFieldOfDefOnType(t,y.ɵNG_COMP_DEF,"directiveDefs"),o.storeFieldOfDefOnType(t,y.ɵNG_COMP_DEF,"pipeDefs"),o.storeFieldOfDefOnType(t,y.ɵNG_COMP_DEF,"tView"),y.ɵpatchComponentDefWithScope(t.ɵcmp,e)}),this.componentToModuleScope.clear()},w.prototype.applyProviderOverrides=function(){function e(r){return function(e){var t=(r===y.ɵNG_COMP_DEF?o.resolvers.component:o.resolvers.directive).resolve(e);o.hasProviderOverrides(t.providers)&&o.patchDefWithProviderOverrides(e,r)}}var o=this;this.seenComponents.forEach(e(y.ɵNG_COMP_DEF)),this.seenDirectives.forEach(e(y.ɵNG_DIR_DEF)),this.seenComponents.clear(),this.seenDirectives.clear()},w.prototype.applyProviderOverridesToModule=function(e){var t,r,o,n;if(!this.moduleProvidersOverridden.has(e)){this.moduleProvidersOverridden.add(e);var i=e[y.ɵNG_INJ_DEF];if(0<this.providerOverridesByToken.size){var s=f(f([],h(i.providers)),h(this.providerOverridesByModule.get(e)||[]));this.hasProviderOverrides(s)&&(this.maybeStoreNgDef(y.ɵNG_INJ_DEF,e),this.storeFieldOfDefOnType(e,y.ɵNG_INJ_DEF,"providers"),i.providers=this.getOverriddenProviders(s));s=T(e[y.ɵNG_MOD_DEF].imports);try{for(var u=d(s),l=u.next();!l.done;l=u.next()){var a=l.value;this.applyProviderOverridesToModule(a)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}try{for(var c=d(O(i.imports)),p=c.next();!p.done;p=c.next())se(a=p.value)&&(this.defCleanupOps.push({object:a,fieldName:"providers",originalValue:a.providers}),a.providers=this.getOverriddenProviders(a.providers))}catch(e){o={error:e}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(o)throw o.error}}}}},w.prototype.patchComponentsWithExistingStyles=function(){this.existingComponentStyles.forEach(function(e,t){return t[y.ɵNG_COMP_DEF].styles=e}),this.existingComponentStyles.clear()},w.prototype.queueTypeArray=function(e,t){var r,o;try{for(var n=d(e),i=n.next();!i.done;i=n.next()){var s=i.value;Array.isArray(s)?this.queueTypeArray(s,t):this.queueType(s,t)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}},w.prototype.recompileNgModule=function(e,t){this.maybeStoreNgDef(y.ɵNG_MOD_DEF,e),this.maybeStoreNgDef(y.ɵNG_INJ_DEF,e),y.ɵcompileNgModuleDefs(e,t)},w.prototype.queueType=function(e,t){return this.resolvers.component.resolve(e)?(!p(e)&&e.hasOwnProperty(y.ɵNG_COMP_DEF)||this.pendingComponents.add(e),this.seenComponents.add(e),void(this.componentToModuleScope.has(e)&&this.componentToModuleScope.get(e)!==M.DECLARATION||this.componentToModuleScope.set(e,t))):this.resolvers.directive.resolve(e)?(e.hasOwnProperty(y.ɵNG_DIR_DEF)||this.pendingDirectives.add(e),void this.seenDirectives.add(e)):void(this.resolvers.pipe.resolve(e)&&!e.hasOwnProperty(y.ɵNG_PIPE_DEF)&&this.pendingPipes.add(e))},w.prototype.queueTypesFromModulesArray=function(e){var u=this,l=new Set,a=function(e){var t,r;try{for(var o=d(e),n=o.next();!n.done;n=o.next()){var i,s=n.value;Array.isArray(s)?a(s):ne(s)?(i=s.ɵmod,l.has(i)||(l.add(i),u.queueTypeArray(T(i.declarations),s),a(T(i.imports)),a(T(i.exports)))):se(s)&&a([s.ngModule])}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}};a(e)},w.prototype.collectModulesAffectedByOverrides=function(e){var l=this,a=new Set,c=new Set,p=function(e,t){var r,o;try{for(var n=d(e),i=n.next();!i.done;i=n.next()){var s,u=i.value;Array.isArray(u)?p(u,t):ne(u)&&(a.has(u)?c.has(u)&&t.forEach(function(e){return c.add(e)}):(a.add(u),l.overriddenModules.has(u)&&t.forEach(function(e){return c.add(e)}),s=u[y.ɵNG_MOD_DEF],p(T(s.imports),t.concat(u))))}}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}};return p(e,[]),c},w.prototype.maybeStoreNgDef=function(e,t){var r;this.initialNgDefs.has(t)||(r=Object.getOwnPropertyDescriptor(t,e),this.initialNgDefs.set(t,[e,r]))},w.prototype.storeFieldOfDefOnType=function(e,t,r){e=e[t],t=e[r];this.defCleanupOps.push({object:e,fieldName:r,originalValue:t})},w.prototype.clearComponentResolutionQueue=function(){var r=this;null===this.originalComponentResolutionQueue&&(this.originalComponentResolutionQueue=new Map),L().forEach(function(e,t){return r.originalComponentResolutionQueue.set(t,e)})},w.prototype.restoreComponentResolutionQueue=function(){var e;null!==this.originalComponentResolutionQueue&&(e=this.originalComponentResolutionQueue,c.clear(),e.forEach(function(e,t){return c.add(t)}),a=e,this.originalComponentResolutionQueue=null)},w.prototype.restoreOriginalState=function(){ue(this.defCleanupOps,function(e){e.object[e.fieldName]=e.originalValue}),this.initialNgDefs.forEach(function(e,t){var e=h(e,2),r=e[0],e=e[1];e?Object.defineProperty(t,r,e):delete t[r]}),this.initialNgDefs.clear(),this.moduleProvidersOverridden.clear(),this.restoreComponentResolutionQueue(),y.ɵsetLocaleId(y.ɵDEFAULT_LOCALE_ID)},w.prototype.compileTestModule=function(){function e(){}var t=this,r=(y.ɵcompileNgModuleDefs(e,{providers:f([],h(this.rootProviderOverrides))}),new y.NgZone({enableLongStackTrace:!0})),r=f(f([{provide:y.NgZone,useValue:r},{provide:y.Compiler,useFactory:function(){return new le(t)}}],h(this.providers)),h(this.providerOverrides)),o=[e,this.additionalModuleTypes,this.imports||[]];y.ɵcompileNgModuleDefs(this.testModuleType,{declarations:this.declarations,imports:o,schemas:this.schemas,providers:r},!0),this.applyProviderOverridesToModule(this.testModuleType)},Object.defineProperty(w.prototype,"injector",{get:function(){if(null!==this._injector)return this._injector;function e(){}var t=[],r=(this.platform.injector.get(y.COMPILER_OPTIONS).forEach(function(e){e.providers&&t.push(e.providers)}),null!==this.compilerProviders&&t.push.apply(t,f([],h(this.compilerProviders))),y.ɵcompileNgModuleDefs(e,{providers:t}),new y.ɵNgModuleFactory(e));return this._injector=r.create(this.platform.injector).injector,this._injector},enumerable:!1,configurable:!0}),w.prototype.getSingleProviderOverrides=function(e){e=ie(e);return this.providerOverridesByToken.get(e)||null},w.prototype.getProviderOverrides=function(e){var t=this;return e&&e.length&&0!==this.providerOverridesByToken.size?O(O(e,function(e){return t.getSingleProviderOverrides(e)||[]})):[]},w.prototype.getOverriddenProviders=function(e){var r=this;if(!e||!e.length||0===this.providerOverridesByToken.size)return[];var e=O(e),t=this.getProviderOverrides(e),e=f(f([],h(e)),h(t)),o=[],n=new Set;return ue(e,function(e){var t=ie(e);r.providerOverridesByToken.has(t)?n.has(t)||(n.add(t),o.unshift(Object.assign(Object.assign({},e),{multi:!1}))):o.unshift(e)}),o},w.prototype.hasProviderOverrides=function(e){return 0<this.getProviderOverrides(e).length},w.prototype.patchDefWithProviderOverrides=function(e,t){var r,o,n=this,i=e[t];i&&i.providersResolver&&(this.maybeStoreNgDef(t,e),r=i.providersResolver,o=function(e){return n.getOverriddenProviders(e)},this.storeFieldOfDefOnType(e,t,"providersResolver"),i.providersResolver=function(e){return r(e,o)})};var oe=w;function w(e,t){this.platform=e,this.additionalModuleTypes=t,this.originalComponentResolutionQueue=null,this.declarations=[],this.imports=[],this.providers=[],this.schemas=[],this.pendingComponents=new Set,this.pendingDirectives=new Set,this.pendingPipes=new Set,this.seenComponents=new Set,this.seenDirectives=new Set,this.overriddenModules=new Set,this.existingComponentStyles=new Map,this.resolvers={module:new te,component:new H,directive:new Q,pipe:new X},this.componentToModuleScope=new Map,this.initialNgDefs=new Map,this.defCleanupOps=[],this._injector=null,this.compilerProviders=null,this.providerOverrides=[],this.rootProviderOverrides=[],this.providerOverridesByModule=new Map,this.providerOverridesByToken=new Map,this.moduleProvidersOverridden=new Set,this.testModuleRef=null,this.testModuleType=function(){}}function ne(e){return e.hasOwnProperty("ɵmod")}function T(e){return e instanceof Function?e():e}function O(e,t){var r=[];return e.forEach(function(e){Array.isArray(e)?r.push.apply(r,f([],h(O(e,t)))):r.push(t?t(e):e)}),r}function ie(e){return r="provide",(t=e)&&"object"==typeof t&&t[r]||e;var t,r}function se(e){return e.hasOwnProperty("ngModule")}function ue(e,t){for(var r=e.length-1;0<=r;r--)t(e[r],r)}function E(e,t){return new Error(e+" class doesn't have @"+t+" decorator or is missing metadata.")}b.prototype.compileModuleSync=function(e){return this.testBed._compileNgModuleSync(e),new y.ɵNgModuleFactory(e)},b.prototype.compileModuleAsync=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,this.testBed._compileNgModuleAsync(t)];case 1:return e.sent(),[2,new y.ɵNgModuleFactory(t)]}})})},b.prototype.compileModuleAndAllComponentsSync=function(e){var t=this.compileModuleSync(e),e=this.testBed._getComponentFactories(e);return new y.ModuleWithComponentFactories(t,e)},b.prototype.compileModuleAndAllComponentsAsync=function(o){return s(this,void 0,void 0,function(){var t,r;return u(this,function(e){switch(e.label){case 0:return[4,this.compileModuleAsync(o)];case 1:return t=e.sent(),r=this.testBed._getComponentFactories(o),[2,new y.ModuleWithComponentFactories(t,r)]}})})},b.prototype.clearCache=function(){},b.prototype.clearCacheFor=function(e){},b.prototype.getModuleId=function(e){e=this.testBed._getModuleResolver().resolve(e);return e&&e.id||void 0};var le=b;function b(e){this.testBed=e}ae.prototype.insertRootElement=function(e){},ae.prototype.removeAllRootElements=function(){};var C=ae;function ae(){}var ce,pe=new y.InjectionToken("ComponentFixtureAutoDetect"),de=new y.InjectionToken("ComponentFixtureNoNgZone"),he=0,fe=(D.initTestEnvironment=function(e,t,r){var o=P();return o.initTestEnvironment(e,t,r),o},D.resetTestEnvironment=function(){P().resetTestEnvironment()},D.configureCompiler=function(e){return P().configureCompiler(e),D},D.configureTestingModule=function(e){return P().configureTestingModule(e),D},D.compileComponents=function(){return P().compileComponents()},D.overrideModule=function(e,t){return P().overrideModule(e,t),D},D.overrideComponent=function(e,t){return P().overrideComponent(e,t),D},D.overrideDirective=function(e,t){return P().overrideDirective(e,t),D},D.overridePipe=function(e,t){return P().overridePipe(e,t),D},D.overrideTemplate=function(e,t){return P().overrideComponent(e,{set:{template:t,templateUrl:null}}),D},D.overrideTemplateUsingTestingModule=function(e,t){return P().overrideTemplateUsingTestingModule(e,t),D},D.overrideProvider=function(e,t){return P().overrideProvider(e,t),D},D.inject=function(e,t,r){return P().inject(e,t,r)},D.get=function(e,t,r){return void 0===t&&(t=y.Injector.THROW_IF_NOT_FOUND),void 0===r&&(r=y.InjectFlags.Default),P().inject(e,t,r)},D.createComponent=function(e){return P().createComponent(e)},D.resetTestingModule=function(){return P().resetTestingModule(),D},D.shouldTearDownTestingModule=function(){return P().shouldTearDownTestingModule()},D.tearDownTestingModule=function(){P().tearDownTestingModule()},D.prototype.initTestEnvironment=function(e,t,r){if(this.platform||this.ngModule)throw new Error("Cannot set base providers because it has already been called");D._environmentTeardownOptions="function"==typeof r||null==r?void 0:r.teardown,this.platform=t,this.ngModule=e,this._compiler=new oe(this.platform,this.ngModule)},D.prototype.resetTestEnvironment=function(){this.resetTestingModule(),this._compiler=null,this.platform=null,this.ngModule=null,D._environmentTeardownOptions=void 0},D.prototype.resetTestingModule=function(){this.checkGlobalCompilationFinished(),y.ɵresetCompiledComponents(),null!==this._compiler&&this.compiler.restoreOriginalState(),this._compiler=new oe(this.platform,this.ngModule);try{this.destroyActiveFixtures()}finally{try{this.shouldTearDownTestingModule()&&this.tearDownTestingModule()}finally{this._testModuleRef=null,this._instanceTeardownOptions=void 0}}},D.prototype.configureCompiler=function(e){if(null!=e.useJit)throw new Error("the Render3 compiler JiT mode is not configurable !");void 0!==e.providers&&this.compiler.setCompilerProviders(e.providers)},D.prototype.configureTestingModule=function(e){this.assertNotInstantiated("R3TestBed.configureTestingModule","configure the test module"),this._instanceTeardownOptions=e.teardown,this.compiler.configureTestingModule(e)},D.prototype.compileComponents=function(){return this.compiler.compileComponents()},D.prototype.inject=function(e,t,r){if(e===D)return this;var o={},n=this.testModuleRef.injector.get(e,o,r);return n===o?this.compiler.injector.get(e,t,r):n},D.prototype.get=function(e,t,r){return void 0===t&&(t=y.Injector.THROW_IF_NOT_FOUND),void 0===r&&(r=y.InjectFlags.Default),this.inject(e,t,r)},D.prototype.execute=function(e,t,r){var o=this,e=e.map(function(e){return o.inject(e)});return t.apply(r,e)},D.prototype.overrideModule=function(e,t){this.assertNotInstantiated("overrideModule","override module metadata"),this.compiler.overrideModule(e,t)},D.prototype.overrideComponent=function(e,t){this.assertNotInstantiated("overrideComponent","override component metadata"),this.compiler.overrideComponent(e,t)},D.prototype.overrideTemplateUsingTestingModule=function(e,t){this.assertNotInstantiated("R3TestBed.overrideTemplateUsingTestingModule","Cannot override template when the test module has already been instantiated"),this.compiler.overrideTemplateUsingTestingModule(e,t)},D.prototype.overrideDirective=function(e,t){this.assertNotInstantiated("overrideDirective","override directive metadata"),this.compiler.overrideDirective(e,t)},D.prototype.overridePipe=function(e,t){this.assertNotInstantiated("overridePipe","override pipe metadata"),this.compiler.overridePipe(e,t)},D.prototype.overrideProvider=function(e,t){this.assertNotInstantiated("overrideProvider","override provider"),this.compiler.overrideProvider(e,t)},D.prototype.createComponent=function(e){var t=this,r=this.inject(C),o="root"+he++,r=(r.insertRootElement(o),e.ɵcmp);if(!r)throw new Error("It looks like '"+y.ɵstringify(e)+"' has not been IVY compiled - it has no 'ɵcmp' field");function n(){var e=u.create(y.Injector.NULL,[],"#"+o,t.testModuleRef);return new l(e,s,i)}var e=this.inject(de,!1),i=this.inject(pe,!1),s=e?null:this.inject(y.NgZone,null),u=new y.ɵRender3ComponentFactory(r),e=s?s.run(n):n();return this._activeFixtures.push(e),e},Object.defineProperty(D.prototype,"compiler",{get:function(){if(null===this._compiler)throw new Error("Need to call TestBed.initTestEnvironment() first");return this._compiler},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"testModuleRef",{get:function(){return null===this._testModuleRef&&(this._testModuleRef=this.compiler.finalize()),this._testModuleRef},enumerable:!1,configurable:!0}),D.prototype.assertNotInstantiated=function(e,t){if(null!==this._testModuleRef)throw new Error("Cannot "+t+" when the test module has already been instantiated. Make sure you are not using `inject` before `"+e+"`.")},D.prototype.checkGlobalCompilationFinished=function(){this._globalCompilationChecked||null!==this._testModuleRef||y.ɵflushModuleScopingQueueAsMuchAsPossible(),this._globalCompilationChecked=!0},D.prototype.destroyActiveFixtures=function(){var r=0;if(this._activeFixtures.forEach(function(t){try{t.destroy()}catch(e){r++,console.error("Error during cleanup of component",{component:t.componentInstance,stacktrace:e})}}),this._activeFixtures=[],0<r&&this.shouldRethrowTeardownErrors())throw Error(r+" "+(1===r?"component":"components")+" threw errors during cleanup")},D.prototype.shouldRethrowTeardownErrors=function(){var e=this._instanceTeardownOptions,t=D._environmentTeardownOptions;return!(!e&&!t)&&(null==(e=null!=(e=null==e?void 0:e.rethrowErrors)?e:null==t?void 0:t.rethrowErrors)||e)},D.prototype.shouldTearDownTestingModule=function(){var e;return null!=(e=null!=(e=null==(e=this._instanceTeardownOptions)?void 0:e.destroyAfterEach)?e:null==(e=D._environmentTeardownOptions)?void 0:e.destroyAfterEach)&&e},D.prototype.tearDownTestingModule=function(){var e;if(null!==this._testModuleRef){var t=this.inject(C);try{this._testModuleRef.destroy()}catch(e){if(this.shouldRethrowTeardownErrors())throw e;console.error("Error during cleanup of a testing module",{component:this._testModuleRef.instance,stacktrace:e})}finally{null!=(e=t.removeAllRootElements)&&e.call(t)}}},D);function D(){this.platform=null,this.ngModule=null,this._compiler=null,this._testModuleRef=null,this._activeFixtures=[],this._globalCompilationChecked=!1}function P(){return ce=ce||new fe}function S(){throw Error("unimplemented")}i(N,ve=y.Compiler),Object.defineProperty(N.prototype,"injector",{get:function(){throw S()},enumerable:!1,configurable:!0}),N.prototype.overrideModule=function(e,t){throw S()},N.prototype.overrideDirective=function(e,t){throw S()},N.prototype.overrideComponent=function(e,t){throw S()},N.prototype.overridePipe=function(e,t){throw S()},N.prototype.loadAotSummaries=function(e){throw S()},N.prototype.getComponentFactory=function(e){throw S()},N.prototype.getComponentFromError=function(e){throw S()};var ve,r=N;function N(){return null!==ve&&ve.apply(this,arguments)||this}r.decorators=[{type:y.Injectable}];function me(){}var ye=0,ge=(F.initTestEnvironment=function(e,t,r){var o=A();return o.initTestEnvironment(e,t,r),o},F.resetTestEnvironment=function(){A().resetTestEnvironment()},F.resetTestingModule=function(){return A().resetTestingModule(),F},F.configureCompiler=function(e){return A().configureCompiler(e),F},F.configureTestingModule=function(e){return A().configureTestingModule(e),F},F.compileComponents=function(){return j().compileComponents()},F.overrideModule=function(e,t){return A().overrideModule(e,t),F},F.overrideComponent=function(e,t){return A().overrideComponent(e,t),F},F.overrideDirective=function(e,t){return A().overrideDirective(e,t),F},F.overridePipe=function(e,t){return A().overridePipe(e,t),F},F.overrideTemplate=function(e,t){return A().overrideComponent(e,{set:{template:t,templateUrl:null}}),F},F.overrideTemplateUsingTestingModule=function(e,t){return A().overrideTemplateUsingTestingModule(e,t),F},F.overrideProvider=function(e,t){return A().overrideProvider(e,t),F},F.inject=function(e,t,r){return A().inject(e,t,r)},F.get=function(e,t,r){return void 0===t&&(t=y.Injector.THROW_IF_NOT_FOUND),void 0===r&&(r=y.InjectFlags.Default),A().inject(e,t,r)},F.createComponent=function(e){return A().createComponent(e)},F.shouldTearDownTestingModule=function(){return A().shouldTearDownTestingModule()},F.tearDownTestingModule=function(){A().tearDownTestingModule()},F.prototype.initTestEnvironment=function(e,t,r){if(this.platform||this.ngModule)throw new Error("Cannot set base providers because it has already been called");this.platform=t,this.ngModule=e,"function"==typeof r?(this._testEnvAotSummaries=r,F._environmentTeardownOptions=void 0):(this._testEnvAotSummaries=(null==r?void 0:r.aotSummaries)||function(){return[]},F._environmentTeardownOptions=null==r?void 0:r.teardown)},F.prototype.resetTestEnvironment=function(){this.resetTestingModule(),this.platform=null,this.ngModule=null,this._testEnvAotSummaries=function(){return[]},F._environmentTeardownOptions=void 0},F.prototype.resetTestingModule=function(){y.ɵclearOverrides(),this._aotSummaries=[],this._templateOverrides=[],this._compiler=null,this._moduleOverrides=[],this._componentOverrides=[],this._directiveOverrides=[],this._pipeOverrides=[],this._isRoot=!0,this._rootProviderOverrides=[],this._moduleFactory=null,this._pendingModuleFactory=null,this._compilerOptions=[],this._providers=[],this._declarations=[],this._imports=[],this._schemas=[];try{this.destroyActiveFixtures()}finally{try{this.shouldTearDownTestingModule()&&this.tearDownTestingModule()}finally{this._moduleRef=null,this._instanceTeardownOptions=void 0,this._instantiated=!1}}},F.prototype.configureCompiler=function(e){this._assertNotInstantiated("TestBed.configureCompiler","configure the compiler"),this._compilerOptions.push(e)},F.prototype.configureTestingModule=function(e){var t;this._assertNotInstantiated("TestBed.configureTestingModule","configure the test module"),e.providers&&(t=this._providers).push.apply(t,f([],h(e.providers))),e.declarations&&(t=this._declarations).push.apply(t,f([],h(e.declarations))),e.imports&&(t=this._imports).push.apply(t,f([],h(e.imports))),e.schemas&&(t=this._schemas).push.apply(t,f([],h(e.schemas))),e.aotSummaries&&this._aotSummaries.push(e.aotSummaries),this._instanceTeardownOptions=e.teardown},F.prototype.compileComponents=function(){var t=this;if(this._moduleFactory||this._instantiated)return Promise.resolve(null);var r=this._createCompilerAndModule();return this._pendingModuleFactory=r,this._compiler.compileModuleAndAllComponentsAsync(r).then(function(e){t._pendingModuleFactory===r&&(t._moduleFactory=e.ngModuleFactory,t._pendingModuleFactory=null)})},F.prototype._initIfNeeded=function(){if(!this._instantiated){if(!this._moduleFactory)try{var t=this._createCompilerAndModule();this._moduleFactory=this._compiler.compileModuleAndAllComponentsSync(t).ngModuleFactory}catch(e){t=this._compiler.getComponentFromError(e);throw t?new Error("This test module uses the component "+y.ɵstringify(t)+' which is using a "templateUrl" or "styleUrls", but they were never compiled. Please call "TestBed.compileComponents" before your test.'):e}try{for(var e=d(this._templateOverrides),r=e.next();!r.done;r=e.next()){var o=r.value,n=o.component,i=o.templateOf,s=this._compiler.getComponentFactory(i);y.ɵoverrideComponentView(n,s)}}catch(e){l={error:e}}finally{try{r&&!r.done&&(u=e.return)&&u.call(e)}finally{if(l)throw l.error}}var t=new y.NgZone({enableLongStackTrace:!0,shouldCoalesceEventChangeDetection:!1}),u=[{provide:y.NgZone,useValue:t}],l=y.Injector.create({providers:u,parent:this.platform.injector,name:this._moduleFactory.moduleType.name});this._moduleRef=this._moduleFactory.create(l),this._moduleRef.injector.get(y.ApplicationInitStatus).runInitializers(),this._instantiated=!0}},F.prototype._createCompilerAndModule=function(){var t,e,r=this,o=this._providers.concat([{provide:R,useValue:this}]),n=f(f([],h(this._declarations)),h(this._templateOverrides.map(function(e){return e.templateOf}))),i=[],s=this._rootProviderOverrides,s=(this._isRoot&&((u=function(){}).decorators=[{type:y.NgModule,args:[{providers:f([],h(s)),jit:!0}]}],i.push(u)),o.push({provide:y.ɵINJECTOR_SCOPE,useValue:this._isRoot?"root":null}),[i,this.ngModule,this._imports]),u=this._schemas,i=function(){},o=(i.decorators=[{type:y.NgModule,args:[{providers:o,declarations:n,imports:s,schemas:u,jit:!0}]}],this.platform.injector.get(me));this._compiler=o.createTestingCompiler(this._compilerOptions);try{for(var l=d(f([this._testEnvAotSummaries],h(this._aotSummaries))),a=l.next();!a.done;a=l.next()){var c=a.value;this._compiler.loadAotSummaries(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}return this._moduleOverrides.forEach(function(e){return r._compiler.overrideModule(e[0],e[1])}),this._componentOverrides.forEach(function(e){return r._compiler.overrideComponent(e[0],e[1])}),this._directiveOverrides.forEach(function(e){return r._compiler.overrideDirective(e[0],e[1])}),this._pipeOverrides.forEach(function(e){return r._compiler.overridePipe(e[0],e[1])}),i},F.prototype._assertNotInstantiated=function(e,t){if(this._instantiated)throw new Error("Cannot "+t+" when the test module has already been instantiated. Make sure you are not using `inject` before `"+e+"`.")},F.prototype.inject=function(e,t,r){if(this._initIfNeeded(),e===R)return this;var o={},n=this._moduleRef.injector.get(e,o,r);return n===o?this._compiler.injector.get(e,t,r):n},F.prototype.get=function(e,t,r){return void 0===t&&(t=y.Injector.THROW_IF_NOT_FOUND),void 0===r&&(r=y.InjectFlags.Default),this.inject(e,t,r)},F.prototype.execute=function(e,t,r){var o=this,e=(this._initIfNeeded(),e.map(function(e){return o.inject(e)}));return t.apply(r,e)},F.prototype.overrideModule=function(e,t){this._assertNotInstantiated("overrideModule","override module metadata"),this._moduleOverrides.push([e,t])},F.prototype.overrideComponent=function(e,t){this._assertNotInstantiated("overrideComponent","override component metadata"),this._componentOverrides.push([e,t])},F.prototype.overrideDirective=function(e,t){this._assertNotInstantiated("overrideDirective","override directive metadata"),this._directiveOverrides.push([e,t])},F.prototype.overridePipe=function(e,t){this._assertNotInstantiated("overridePipe","override pipe metadata"),this._pipeOverrides.push([e,t])},F.prototype.overrideProvider=function(e,t){this._assertNotInstantiated("overrideProvider","override provider"),this.overrideProviderImpl(e,t)},F.prototype.overrideProviderImpl=function(e,t,r){void 0===r&&(r=!1);var o=null,o=("string"!=typeof e&&(o=y.ɵgetInjectableDef(e))&&"root"===o.providedIn&&(t.useFactory?this._rootProviderOverrides.push({provide:e,useFactory:t.useFactory,deps:t.deps||[]}):this._rootProviderOverrides.push({provide:e,useValue:t.useValue})),0),n=t.useFactory?(o|=1024,t.useFactory):(o|=256,t.useValue),t=(t.deps||[]).map(function(e){var t,r=0;return Array.isArray(e)?e.forEach(function(e){e instanceof y.Optional?r|=2:e instanceof y.SkipSelf?r|=1:t=e}):t=e,[r,t]});y.ɵoverrideProvider({token:e,flags:o,deps:t,value:n,deprecatedBehavior:r})},F.prototype.overrideTemplateUsingTestingModule=function(e,t){this._assertNotInstantiated("overrideTemplateUsingTestingModule","override template");var r=function(){};r.decorators=[{type:y.Component,args:[{selector:"empty",template:t,jit:!0}]}],this._templateOverrides.push({component:e,templateOf:r})},F.prototype.createComponent=function(e){var t=this,r=(this._initIfNeeded(),this._compiler.getComponentFactory(e));if(!r)throw new Error("Cannot create the component "+y.ɵstringify(e)+" as it was not imported into the testing module!");function o(){var e=r.create(y.Injector.NULL,[],"#"+s,t._moduleRef);return new l(e,i,n)}var e=this.inject(de,!1),n=this.inject(pe,!1),i=e?null:this.inject(y.NgZone,null),e=this.inject(C),s="root"+ye++,e=(e.insertRootElement(s),i?i.run(o):o());return this._activeFixtures.push(e),e},F.prototype.destroyActiveFixtures=function(){var r=0;if(this._activeFixtures.forEach(function(t){try{t.destroy()}catch(e){r++,console.error("Error during cleanup of component",{component:t.componentInstance,stacktrace:e})}}),this._activeFixtures=[],0<r&&this.shouldRethrowTeardownErrors())throw Error(r+" "+(1===r?"component":"components")+" threw errors during cleanup")},F.prototype.shouldRethrowTeardownErrors=function(){var e=this._instanceTeardownOptions,t=F._environmentTeardownOptions;return!(!e&&!t)&&(null==(e=null!=(e=null==e?void 0:e.rethrowErrors)?e:null==t?void 0:t.rethrowErrors)||e)},F.prototype.shouldTearDownTestingModule=function(){var e;return null!=(e=null!=(e=null==(e=this._instanceTeardownOptions)?void 0:e.destroyAfterEach)?e:null==(e=F._environmentTeardownOptions)?void 0:e.destroyAfterEach)&&e},F.prototype.tearDownTestingModule=function(){var t,r,o,n;if(null!==this._moduleRef){var e=this.inject(C);try{this._moduleRef.destroy()}catch(e){if(null==(o=null!=(t=null==(n=this._instanceTeardownOptions)?void 0:n.rethrowErrors)?t:null==(r=F._environmentTeardownOptions)?void 0:r.rethrowErrors)||o)throw e;console.error("Error during cleanup of a testing module",{component:this._moduleRef.instance,stacktrace:e})}finally{null!=(n=null==e?void 0:e.removeAllRootElements)&&n.call(e)}}},F);function F(){this._instantiated=!1,this._compiler=null,this._moduleRef=null,this._moduleFactory=null,this._pendingModuleFactory=null,this._compilerOptions=[],this._moduleOverrides=[],this._componentOverrides=[],this._directiveOverrides=[],this._pipeOverrides=[],this._providers=[],this._declarations=[],this._imports=[],this._schemas=[],this._activeFixtures=[],this._testEnvAotSummaries=function(){return[]},this._aotSummaries=[],this._templateOverrides=[],this._isRoot=!0,this._rootProviderOverrides=[],this.platform=null,this.ngModule=null}var _e,R=y.ɵivyEnabled?fe:ge,j=y.ɵivyEnabled?P:A;function A(){return _e=_e||new ge}function Me(e,t){var r=j();return function(){return r.execute(e,t,this)}}Te.prototype._addModule=function(){var e=this._moduleDef();e&&j().configureTestingModule(e)},Te.prototype.inject=function(e,t){var r=this;return function(){return r._addModule(),Me(e,t).call(this)}};var we=Te;function Te(e){this._moduleDef=e}var I="undefined"==typeof window?global:window;function Oe(e){return function(){R.shouldTearDownTestingModule()===e&&(R.resetTestingModule(),U())}}I.beforeEach&&I.beforeEach(Oe(!1)),I.afterEach&&I.afterEach(Oe(!0));e.ComponentFixture=l,e.ComponentFixtureAutoDetect=pe,e.ComponentFixtureNoNgZone=de,e.InjectSetupWrapper=we,e.TestBed=R,e.TestComponentRenderer=C,e.__core_private_testing_placeholder__="",e.async=x,e.discardPeriodicTasks=function(){if(o)return o.discardPeriodicTasks();throw new Error(n)},e.fakeAsync=function(e){if(o)return o.fakeAsync(e);throw new Error(n)},e.flush=function(e){if(o)return o.flush(e);throw new Error(n)},e.flushMicrotasks=function(){if(o)return o.flushMicrotasks();throw new Error(n)},e.getTestBed=j,e.inject=Me,e.resetFakeAsyncZone=U,e.tick=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t={processNewMacroTasksSynchronously:!0}),o)return o.tick(e,t);throw new Error(n)},e.waitForAsync=x,e.withModule=function(t,r){return r?function(){var e=j();return t&&e.configureTestingModule(t),r.apply(this)}:new we(function(){return t})},e.ɵMetadataOverrider=z,e.ɵTestingCompiler=r,e.ɵTestingCompilerFactory=me,e.ɵangular_packages_core_testing_testing_a=ge,e.ɵangular_packages_core_testing_testing_b=fe,e.ɵangular_packages_core_testing_testing_c=P,Object.defineProperty(e,"__esModule",{value:!0})});